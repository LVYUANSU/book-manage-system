(function(e){function n(n){for(var r,o,u=n[0],i=n[1],s=n[2],l=0,d=[];l<u.length;l++)o=u[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(n);while(d.length)d.shift()();return c.push.apply(c,s||[]),t()}function t(){for(var e,n=0;n<c.length;n++){for(var t=c[n],r=!0,o=1;o<t.length;o++){var u=t[o];0!==a[u]&&(r=!1)}r&&(c.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},o={app:0},a={app:0},c=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1ae133b5":"53340a0e","chunk-21dfadec":"d10c90b6","chunk-2d0b5f7b":"38da74aa","chunk-313e157d":"1e6d6376","chunk-37dda608":"88695198","chunk-6ef997d3":"5725197d","chunk-6f3c6462":"642f205d","chunk-771d4914":"3442f45b","chunk-b4372304":"c329898b"}[e]+".js"}function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t={"chunk-1ae133b5":1,"chunk-21dfadec":1,"chunk-313e157d":1,"chunk-37dda608":1,"chunk-6ef997d3":1,"chunk-6f3c6462":1,"chunk-771d4914":1,"chunk-b4372304":1};o[e]?n.push(o[e]):0!==o[e]&&t[e]&&n.push(o[e]=new Promise((function(n,t){for(var r="css/"+({}[e]||e)+"."+{"chunk-1ae133b5":"77c73b91","chunk-21dfadec":"df34d4ed","chunk-2d0b5f7b":"31d6cfe0","chunk-313e157d":"4064bcee","chunk-37dda608":"8b120176","chunk-6ef997d3":"64d7e2f9","chunk-6f3c6462":"3555b59f","chunk-771d4914":"2fcbda11","chunk-b4372304":"bbdad7cf"}[e]+".css",a=i.p+r,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===a))return n()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],l=s.getAttribute("data-href");if(l===r||l===a)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var r=n&&n.target&&n.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete o[e],f.parentNode.removeChild(f),t(c)},f.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)n.push(r[2]);else{var c=new Promise((function(n,t){r=a[e]=[n,t]}));n.push(r[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(e);var d=new Error;s=function(n){l.onerror=l.onload=null,clearTimeout(f);var t=a[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,t[1](d)}a[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(n)},i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/book-manage-system/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var d=0;d<s.length;d++)n(s[d]);var f=l;c.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("85ec")},1:function(e,n){},1034:function(e,n,t){},2:function(e,n){},"24b9d":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);var r=t("2b0e"),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[e.isLoading?t("div",{staticClass:"app-loading"},[e._m(0)]):t("div",{staticClass:"app-content"},[e.hasError?t("div",{staticClass:"error-boundary"},[t("div",{staticClass:"error-content"},[t("h2",[e._v("⚠️ 系统出现异常")]),t("p",[e._v("抱歉，系统发生了一些错误，请刷新页面重试")]),t("button",{staticClass:"retry-btn",on:{click:e.handleRetry}},[e._v("重新加载")]),t("button",{staticClass:"home-btn",on:{click:e.goToHome}},[e._v("返回首页")])])]):t("router-view")],1),e.globalMessage?t("div",{staticClass:"global-message",class:e.messageType},[e._v(" "+e._s(e.globalMessage)+" "),t("button",{staticClass:"close-btn",on:{click:e.closeMessage}},[e._v("×")])]):e._e(),t("div",{staticClass:"watermark"},[e._v("智慧图书管理系统")])])},a=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"loading-spinner"},[t("div",{staticClass:"spinner"}),t("p",[e._v("智慧图书管理系统加载中...")])])}],c=t("8c4f");const u=Object(c["useRouter"])(),i=Object(r["ref"])(!0),s=Object(r["ref"])(!1),l=Object(r["ref"])(""),d=Object(r["ref"])("info"),f=()=>{setTimeout(()=>{i.value=!1,h("欢迎使用智慧图书管理系统","success")},800)},h=(e,n="info")=>{l.value=e,d.value=n,setTimeout(()=>{l.value=""},3e3)};Object(r["onErrorCaptured"])(e=>(console.error("App捕获到错误:",e),s.value=!0,h("系统发生错误，请刷新页面重试","error"),!1)),u.afterEach(e=>{window.scrollTo(0,0),console.log("导航到: "+e.path)}),Object(r["onMounted"])(()=>{f(),window.addEventListener("unhandledrejection",e=>{console.error("未处理的Promise错误:",e.reason),h("系统出现异常，请稍后重试","error")}),window.addEventListener("offline",()=>{h("网络连接已断开，请检查网络设置","warning")}),window.addEventListener("online",()=>{h("网络连接已恢复","success")})}),Object(r["onBeforeUnmount"])(()=>{window.removeEventListener("unhandledrejection",null),window.removeEventListener("offline",null),window.removeEventListener("online",null)});var p=void 0,m=(t("034f"),t("2877")),b=Object(m["a"])(p,o,a,!1,null,null,null),v=b.exports,g=t("5c96"),k=t.n(g);t("0fae");const y="token";function w(){return sessionStorage.getItem(y)}var C=t("313e"),_=t.n(C);r["default"].prototype.$echarts=_.a,r["default"].use(k.a),r["default"].use(c["a"]);const j=[{path:"/",component:()=>t.e("chunk-b4372304").then(t.bind(null,"ede4"))},{path:"/login",component:()=>t.e("chunk-b4372304").then(t.bind(null,"ede4"))},{path:"/register",component:()=>t.e("chunk-6f3c6462").then(t.bind(null,"0f9e"))},{path:"/createNotice",component:()=>t.e("chunk-771d4914").then(t.bind(null,"8283")),meta:{requireAuth:!0}},{path:"/admin",component:()=>t.e("chunk-6ef997d3").then(t.bind(null,"3c19")),meta:{requireAuth:!0},children:[{path:"/adminLayout",name:"数据总览",icon:"el-icon-data-analysis",component:()=>t.e("chunk-313e157d").then(t.bind(null,"8f88")),meta:{requireAuth:!0}},{path:"/userManage",name:"用户管理",icon:"el-icon-user-solid",component:()=>t.e("chunk-21dfadec").then(t.bind(null,"50eb")),meta:{requireAuth:!0}},{path:"/noticeManage",name:"公告管理",icon:"el-icon-edit-outline",component:()=>t.e("chunk-37dda608").then(t.bind(null,"96e1")),meta:{requireAuth:!0}}]},{path:"/user",component:()=>t.e("chunk-1ae133b5").then(t.bind(null,"ba5b")),meta:{requireAuth:!0},children:[{name:"留言板",path:"/main",icon:"el-icon-question",component:()=>t.e("chunk-2d0b5f7b").then(t.bind(null,"1ac8")),meta:{requireAuth:!0}}]}],E=new c["a"]({routes:j,mode:"hash"});E.beforeEach((e,n,t)=>{if("/login"===e.path||"/register"===e.path)return t();if(e.matched.some(e=>e.meta.requireAuth)){const n=w();if(!n)return t({path:"/login",query:{redirect:e.fullPath}});try{const n=parseInt(sessionStorage.getItem("role"));return"/admin"===e.matched[0].path&&1!==n||"/user"===e.matched[0].path&&2!==n?(clearToken(),t("/login")):t()}catch(r){return console.error("权限检查失败:",r),t("/login")}}t()});var O=E,A=t("1d71"),T=t("f9d5"),L=t.n(T),q=(t("4413"),t("6af8"),t("82d9"),t("24b9d"),t("6901"),t("bcd4"),t("1034"),t("bc3a")),P=t.n(q);const S="http://localhost:21090/api/book-manage-sys-api/v1.0",x=P.a.create({baseURL:S,timeout:8e3});x.interceptors.request.use(e=>{const n=w();return null!==n&&(e.headers["token"]=n),e},e=>Promise.reject(e));var M=x,B=t("8237"),$=t.n(B),N=t("3d20"),D=t.n(N);const I={install(e){e.prototype.$swalConfirm=async function(e={}){const n={title:"提示",text:"",icon:"info",reverseButtons:!0,showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消",customClass:{confirmButton:"sweet-btn-primary"},...e};try{const e=await D.a.fire(n);return e.isConfirmed}catch(t){return console.error("Swal Error:",t),!1}}}};var R=I;r["default"].config.productionTip=!1,r["default"].use(L.a),r["default"].prototype.$md5=$.a,r["default"].prototype.$axios=M,r["default"].use(R),new r["default"]({router:O,regionData:A["b"],provinceAndCityData:A["a"],VueSweetalert2:L.a,render:e=>e(v)}).$mount("#app")},6901:function(e,n,t){},"6af8":function(e,n,t){},"82d9":function(e,n,t){},"85ec":function(e,n,t){},bcd4:function(e,n,t){}});
//# sourceMappingURL=app.102a92ef.js.map